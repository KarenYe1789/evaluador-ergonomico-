<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluador Ergon√≥mico para Oficina</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide-react/0.263.1/lucide-react.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            body * { visibility: hidden; }
            .print-content, .print-content * { visibility: visible; }
            .print-content { position: absolute; left: 0; top: 0; width: 100%; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { AlertTriangle, CheckCircle, XCircle, Monitor, Armchair, Eye, Hand } = lucide;

        const EvaluadorErgonomico = () => {
            const [respuestas, setRespuestas] = useState({});
            const [mostrarResultados, setMostrarResultados] = useState(false);

            const preguntas = [
                {
                    id: 'monitor_altura',
                    categoria: 'Monitor',
                    icono: React.createElement(Monitor, { className: "w-5 h-5" }),
                    pregunta: '¬øLa parte superior de tu monitor est√° a la altura de tus ojos o ligeramente por debajo?',
                    opciones: [
                        { valor: 'si', texto: 'S√≠, est√° a la altura correcta', puntos: 2 },
                        { valor: 'alto', texto: 'Est√° muy alto, tengo que levantar la cabeza', puntos: 0 },
                        { valor: 'bajo', texto: 'Est√° muy bajo, tengo que inclinar la cabeza hacia abajo', puntos: 0 }
                    ]
                },
                {
                    id: 'monitor_distancia',
                    categoria: 'Monitor',
                    icono: React.createElement(Eye, { className: "w-5 h-5" }),
                    pregunta: '¬øA qu√© distancia est√° tu monitor de tus ojos?',
                    opciones: [
                        { valor: 'correcta', texto: '50-70 cm (largo de un brazo extendido)', puntos: 2 },
                        { valor: 'cerca', texto: 'Menos de 50 cm (muy cerca)', puntos: 0 },
                        { valor: 'lejos', texto: 'M√°s de 70 cm (tengo que forzar la vista)', puntos: 1 }
                    ]
                },
                {
                    id: 'silla_espalda',
                    categoria: 'Silla',
                    icono: React.createElement(Armchair, { className: "w-5 h-5" }),
                    pregunta: '¬øTu espalda est√° completamente apoyada en el respaldo de la silla?',
                    opciones: [
                        { valor: 'si', texto: 'S√≠, tengo soporte completo en la zona lumbar', puntos: 2 },
                        { valor: 'parcial', texto: 'Solo parcialmente apoyada', puntos: 1 },
                        { valor: 'no', texto: 'No, me siento en el borde o sin apoyo', puntos: 0 }
                    ]
                },
                {
                    id: 'pies_suelo',
                    categoria: 'Postura',
                    icono: React.createElement(Armchair, { className: "w-5 h-5" }),
                    pregunta: '¬øTus pies est√°n completamente apoyados en el suelo?',
                    opciones: [
                        { valor: 'si', texto: 'S√≠, ambos pies tocan completamente el suelo', puntos: 2 },
                        { valor: 'reposapi√©s', texto: 'Uso un reposapi√©s', puntos: 2 },
                        { valor: 'no', texto: 'No, est√°n colgando o en puntas', puntos: 0 }
                    ]
                },
                {
                    id: 'teclado_mu√±ecas',
                    categoria: 'Teclado/Mouse',
                    icono: React.createElement(Hand, { className: "w-5 h-5" }),
                    pregunta: '¬øC√≥mo est√°n posicionadas tus mu√±ecas al escribir?',
                    opciones: [
                        { valor: 'neutras', texto: 'Rectas y neutras, sin doblar hacia arriba o abajo', puntos: 2 },
                        { valor: 'dobladas', texto: 'Dobladas hacia arriba o hacia abajo', puntos: 0 },
                        { valor: 'apoyo', texto: 'Uso soporte para mu√±ecas', puntos: 2 }
                    ]
                },
                {
                    id: 'brazos_posicion',
                    categoria: 'Brazos',
                    icono: React.createElement(Hand, { className: "w-5 h-5" }),
                    pregunta: '¬øC√≥mo sientes tus brazos y hombros al escribir?',
                    opciones: [
                        { valor: 'relajados', texto: 'Relajados y c√≥modos, sin tensi√≥n', puntos: 2 },
                        { valor: 'elevados', texto: 'Tengo que levantar los hombros o estirar los brazos', puntos: 0 },
                        { valor: 'encogidos', texto: 'Tengo que encoger o doblar mucho los brazos', puntos: 0 }
                    ]
                },
                {
                    id: 'iluminacion',
                    categoria: 'Iluminaci√≥n',
                    icono: React.createElement(Eye, { className: "w-5 h-5" }),
                    pregunta: '¬øHay reflejos o brillos molestos en tu pantalla?',
                    opciones: [
                        { valor: 'no', texto: 'No, la iluminaci√≥n es adecuada', puntos: 2 },
                        { valor: 'pocos', texto: 'Algunos reflejos ocasionales', puntos: 1 },
                        { valor: 'si', texto: 'S√≠, hay reflejos constantes que me molestan', puntos: 0 }
                    ]
                },
                {
                    id: 'ergonomia_ambiental',
                    categoria: 'Ambiente',
                    icono: React.createElement(Eye, { className: "w-5 h-5" }),
                    pregunta: '¬øC√≥mo percibes el ambiente t√©rmico en tu √°rea de trabajo?',
                    opciones: [
                        { valor: 'confortable', texto: 'Temperatura confortable, sin corrientes de aire molestas', puntos: 2 },
                        { valor: 'frio', texto: 'Hace fr√≠o o hay corrientes de aire que me incomodan', puntos: 0 },
                        { valor: 'calor', texto: 'Hace calor o el ambiente es muy cerrado', puntos: 0 }
                    ]
                },
                {
                    id: 'descansos',
                    categoria: 'H√°bitos',
                    icono: React.createElement(CheckCircle, { className: "w-5 h-5" }),
                    pregunta: '¬øTomas descansos regulares durante tu jornada?',
                    opciones: [
                        { valor: 'si', texto: 'S√≠, cada 30-60 minutos me levanto y estiro', puntos: 2 },
                        { valor: 'pocos', texto: 'Solo en el almuerzo', puntos: 1 },
                        { valor: 'no', texto: 'Casi nunca, trabajo horas seguidas', puntos: 0 }
                    ]
                }
            ];

            const manejarRespuesta = (preguntaId, valor, puntos) => {
                setRespuestas(prev => ({
                    ...prev,
                    [preguntaId]: { valor, puntos }
                }));
            };

            const calcularPuntuacion = () => {
                const total = Object.values(respuestas).reduce((sum, resp) => sum + resp.puntos, 0);
                const maxPuntos = preguntas.length * 2;
                return { total, maxPuntos, porcentaje: Math.round((total / maxPuntos) * 100) };
            };

            const obtenerNivelRiesgo = (porcentaje) => {
                if (porcentaje >= 80) return { 
                    nivel: 'Bajo', 
                    color: 'text-green-600', 
                    bg: 'bg-green-100', 
                    icono: React.createElement(CheckCircle, { className: "w-6 h-6 text-green-600" })
                };
                if (porcentaje >= 60) return { 
                    nivel: 'Moderado', 
                    color: 'text-yellow-600', 
                    bg: 'bg-yellow-100', 
                    icono: React.createElement(AlertTriangle, { className: "w-6 h-6 text-yellow-600" })
                };
                return { 
                    nivel: 'Alto', 
                    color: 'text-red-600', 
                    bg: 'bg-red-100', 
                    icono: React.createElement(XCircle, { className: "w-6 h-6 text-red-600" })
                };
            };

            const obtenerRecomendaciones = () => {
                const recomendaciones = [];
                
                if (respuestas.monitor_altura?.puntos === 0) {
                    recomendaciones.push("üì∫ Ajusta la altura de tu monitor: la parte superior debe estar a nivel de tus ojos");
                }
                if (respuestas.monitor_distancia?.puntos < 2) {
                    recomendaciones.push("üëÅÔ∏è Coloca tu monitor a 50-70 cm de distancia (largo de un brazo)");
                }
                if (respuestas.silla_espalda?.puntos < 2) {
                    recomendaciones.push("ü™ë Ajusta tu silla para tener soporte lumbar completo");
                }
                if (respuestas.pies_suelo?.puntos === 0) {
                    recomendaciones.push("üë£ Usa un reposapi√©s si tus pies no tocan el suelo completamente");
                }
                if (respuestas.teclado_mu√±ecas?.puntos === 0) {
                    recomendaciones.push("‚å®Ô∏è Mant√©n las mu√±ecas en posici√≥n neutra, considera usar soporte");
                }
                if (respuestas.brazos_posicion?.puntos === 0) {
                    recomendaciones.push("üí™ Ajusta la altura de tu silla y escritorio para mantener brazos relajados");
                }
                if (respuestas.iluminacion?.puntos < 2) {
                    recomendaciones.push("üí° Mejora la iluminaci√≥n para evitar reflejos en la pantalla");
                }
                if (respuestas.ergonomia_ambiental?.puntos === 0) {
                    recomendaciones.push("üå°Ô∏è Reporta problemas de temperatura o corrientes de aire a mantenimiento");
                }
                if (respuestas.descansos?.puntos < 2) {
                    recomendaciones.push("‚è∞ Toma descansos cada 30-60 minutos para estirar y relajar m√∫sculos");
                }
                
                return recomendaciones;
            };

            const imprimirResultados = () => {
                const { total, maxPuntos, porcentaje } = calcularPuntuacion();
                const riesgo = obtenerNivelRiesgo(porcentaje);
                const recomendaciones = obtenerRecomendaciones();
                
                const contenidoImpresion = `
                <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px;">
                  <h1 style="color: #1f2937; text-align: center; border-bottom: 2px solid #3b82f6; padding-bottom: 10px;">
                    Evaluaci√≥n Ergon√≥mica - Resultados
                  </h1>
                  
                  <div style="background-color: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0;">
                    <h2 style="color: #374151; margin-top: 0;">Resumen de Resultados</h2>
                    <p><strong>Puntuaci√≥n:</strong> ${total}/${maxPuntos} puntos (${porcentaje}%)</p>
                    <p><strong>Nivel de Riesgo Ergon√≥mico:</strong> ${riesgo.nivel}</p>
                    <p><strong>Fecha de evaluaci√≥n:</strong> ${new Date().toLocaleDateString()}</p>
                  </div>
                  
                  ${recomendaciones.length > 0 ? `
                    <div style="margin: 20px 0;">
                      <h2 style="color: #374151;">Recomendaciones Personalizadas</h2>
                      <ul style="line-height: 1.6;">
                        ${recomendaciones.map(rec => `<li style="margin: 8px 0;">${rec}</li>`).join('')}
                      </ul>
                    </div>
                  ` : `
                    <div style="text-align: center; color: #059669; margin: 20px 0;">
                      <h2>¬°Excelente configuraci√≥n ergon√≥mica!</h2>
                      <p>Tu estaci√≥n de trabajo cumple con los est√°ndares ergon√≥micos recomendados.</p>
                    </div>
                  `}
                  
                  <div style="background-color: #dbeafe; padding: 15px; border-radius: 8px; margin: 20px 0;">
                    <h3 style="color: #1e40af; margin-top: 0;">Recordatorios Importantes:</h3>
                    <ul style="line-height: 1.6; color: #1e40af;">
                      <li>La ergonom√≠a previene lesiones musculoesquel√©ticas</li>
                      <li>Los ajustes graduales son m√°s efectivos</li>
                      <li>Consulta con tu supervisor sobre mejoras necesarias</li>
                      <li>Revisa tu postura regularmente durante el d√≠a</li>
                    </ul>
                  </div>
                  
                  <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #d1d5db;">
                    <p style="color: #6b7280; font-size: 14px;">
                      Evaluaci√≥n realizada con el Sistema de Evaluaci√≥n Ergon√≥mica<br>
                      Departamento de Seguridad y Medio Ambiente
                    </p>
                  </div>
                </div>
                `;
                
                const ventanaImpresion = window.open('', '_blank');
                ventanaImpresion.document.write(contenidoImpresion);
                ventanaImpresion.document.close();
                ventanaImpresion.print();
            };

            const todasRespondidas = Object.keys(respuestas).length === preguntas.length;

            return React.createElement('div', { className: "max-w-4xl mx-auto p-6 bg-white" },
                React.createElement('div', { className: "text-center mb-8" },
                    React.createElement('h1', { className: "text-3xl font-bold text-gray-800 mb-2" },
                        "Evaluador Ergon√≥mico para Oficina"
                    ),
                    React.createElement('p', { className: "text-gray-600" },
                        "Eval√∫a tu estaci√≥n de trabajo y recibe recomendaciones personalizadas"
                    )
                ),

                !mostrarResultados ? 
                React.createElement('div', { className: "space-y-6" },
                    ...preguntas.map((pregunta, index) =>
                        React.createElement('div', { key: pregunta.id, className: "bg-gray-50 rounded-lg p-6 border border-gray-200" },
                            React.createElement('div', { className: "flex items-center mb-4" },
                                pregunta.icono,
                                React.createElement('span', { className: "ml-2 text-sm font-medium text-gray-500 uppercase tracking-wide" },
                                    pregunta.categoria
                                )
                            ),
                            
                            React.createElement('h3', { className: "text-lg font-semibold text-gray-800 mb-4" },
                                `${index + 1}. ${pregunta.pregunta}`
                            ),
                            
                            React.createElement('div', { className: "space-y-2" },
                                ...pregunta.opciones.map((opcion) =>
                                    React.createElement('label', { 
                                        key: opcion.valor, 
                                        className: "flex items-center p-3 rounded-lg border border-gray-200 hover:bg-white cursor-pointer transition-colors" 
                                    },
                                        React.createElement('input', {
                                            type: "radio",
                                            name: pregunta.id,
                                            value: opcion.valor,
                                            onChange: () => manejarRespuesta(pregunta.id, opcion.valor, opcion.puntos),
                                            className: "mr-3 h-4 w-4 text-blue-600"
                                        }),
                                        React.createElement('span', { className: "text-gray-700" }, opcion.texto)
                                    )
                                )
                            )
                        )
                    ),

                    React.createElement('div', { className: "text-center" },
                        React.createElement('button', {
                            onClick: () => setMostrarResultados(true),
                            disabled: !todasRespondidas,
                            className: `px-8 py-3 rounded-lg font-semibold text-white transition-colors ${
                                todasRespondidas 
                                    ? 'bg-blue-600 hover:bg-blue-700' 
                                    : 'bg-gray-400 cursor-not-allowed'
                            }`
                        }, todasRespondidas ? 'Ver Resultados' : `Completa todas las preguntas (${Object.keys(respuestas).length}/${preguntas.length})`)
                    )
                ) :
                React.createElement('div', { className: "space-y-6" },
                    React.createElement('div', { className: "bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200" },
                        React.createElement('div', { className: "text-center" },
                            React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-4" }, "Resultados de tu Evaluaci√≥n"),
                            
                            (() => {
                                const { total, maxPuntos, porcentaje } = calcularPuntuacion();
                                const riesgo = obtenerNivelRiesgo(porcentaje);
                                
                                return React.createElement('div', { className: "space-y-4" },
                                    React.createElement('div', { className: `inline-flex items-center px-6 py-3 rounded-full ${riesgo.bg}` },
                                        riesgo.icono,
                                        React.createElement('span', { className: `ml-2 text-lg font-semibold ${riesgo.color}` },
                                            `Riesgo Ergon√≥mico: ${riesgo.nivel}`
                                        )
                                    ),
                                    
                                    React.createElement('div', { className: "text-2xl font-bold text-gray-800" },
                                        `${porcentaje}% (${total}/${maxPuntos} puntos)`
                                    ),
                                    
                                    React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-3" },
                                        React.createElement('div', {
                                            className: `h-3 rounded-full transition-all duration-500 ${
                                                porcentaje >= 80 ? 'bg-green-500' : 
                                                porcentaje >= 60 ? 'bg-yellow-500' : 'bg-red-500'
                                            }`,
                                            style: { width: `${porcentaje}%` }
                                        })
                                    )
                                );
                            })()
                        )
                    ),

                    React.createElement('div', { className: "bg-white rounded-lg p-6 border border-gray-200" },
                        React.createElement('h3', { className: "text-xl font-semibold text-gray-800 mb-4 flex items-center" },
                            React.createElement(AlertTriangle, { className: "w-5 h-5 mr-2 text-orange-500" }),
                            "Recomendaciones Personalizadas"
                        ),
                        
                        (() => {
                            const recomendaciones = obtenerRecomendaciones();
                            return recomendaciones.length > 0 ?
                                React.createElement('div', { className: "space-y-3" },
                                    ...recomendaciones.map((rec, index) =>
                                        React.createElement('div', { key: index, className: "flex items-start p-3 bg-orange-50 rounded-lg border border-orange-200" },
                                            React.createElement('div', { className: "text-orange-600 mr-3" }, "‚Ä¢"),
                                            React.createElement('span', { className: "text-gray-700" }, rec)
                                        )
                                    )
                                ) :
                                React.createElement('div', { className: "text-center py-4" },
                                    React.createElement(CheckCircle, { className: "w-12 h-12 text-green-500 mx-auto mb-2" }),
                                    React.createElement('p', { className: "text-green-600 font-semibold" },
                                        "¬°Excelente! Tu estaci√≥n de trabajo tiene una configuraci√≥n ergon√≥mica √≥ptima."
                                    )
                                );
                        })()
                    ),

                    React.createElement('div', { className: "bg-blue-50 rounded-lg p-6 border border-blue-200" },
                        React.createElement('h3', { className: "text-lg font-semibold text-blue-800 mb-3" }, "Recuerda:"),
                        React.createElement('div', { className: "grid md:grid-cols-2 gap-4 text-sm text-blue-700" },
                            React.createElement('div', null, "‚Ä¢ La ergonom√≠a previene lesiones musculoesquel√©ticas"),
                            React.createElement('div', null, "‚Ä¢ Los ajustes graduales son m√°s efectivos"),
                            React.createElement('div', null, "‚Ä¢ Consulta con tu supervisor sobre mejoras necesarias"),
                            React.createElement('div', null, "‚Ä¢ Revisa tu postura regularmente durante el d√≠a")
                        )
                    ),

                    React.createElement('div', { className: "text-center space-x-4" },
                        React.createElement('button', {
                            onClick: () => {
                                setRespuestas({});
                                setMostrarResultados(false);
                            },
                            className: "px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                        }, "Hacer Nueva Evaluaci√≥n"),
                        React.createElement('button', {
                            onClick: imprimirResultados,
                            className: "px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                        }, "Imprimir Resultados")
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(EvaluadorErgonomico), document.getElementById('root'));
    </script>
</body>
</html>